(lang dune 3.6)

(name iperf)

(generate_opam_files true)

(source (github avsm/ocaml-iperf))
(license ISC)
(authors "Anil Madhavapeddy")
(maintainers "anil@recoil.org")

(package
 (name iperf)
 (synopsis "An OCaml library for embedding IPerf servers")
 (description "This library implements the IPerf V3 protocol so that an OCaml service can respond to traffic generated by an IPerf v3 client.  Note that the v2 version of the protocol is not currently implemented.")
 (depends
  (ocaml (>= "4.12.0"))
  (yojson (>= 2.0.0))
  cstruct))

(package
  (name iperf-eio)
  (synopsis "Iperf v3 server using Eio")  
  (description "This library implements a server version of the Iperf V3 protocol suitable so that an OCaml service can respond to traffic generated by an IPerf v3 client.")
  (depends
   (ocaml (>= "5.0.0"))
   (iperf (= :version))
   (eio (>= "0.8.0"))))
